# CPU

## Architecture

* IA-32: intelの32bit
  * i386: intelの16bit x86を32bitに拡張
  * i686
* IA-64: intelの64bit
  * IA-32とは互換性なし
* x86-64: AMD64
  * IA-32と互換性有り
  * Intel 64は互換性ある

## I/O

CPUの命令実行により、CPUから外部へアクセスする仕組みと定義。  

* CPUと外部のI/Oデバイス(display, keyboard network)はバスを介して接続する。  
  * メモリとの接続は高速になるように設計されている。  
  * バス関連の仕様としてPCI Expressがある
* I/Oアクセスとは、I/Oデバイスに対する単純なリード及びライト操作
* I/Oアクセス命令には２つの系統がある
  * memory mapped I/O
    * I/Oデバイスをメモリのようにみせる
    * 物理アドレス空間に対して通常の命令で操作する
  * I/O専用命令をI/O専用の物理メモリアドレス空間で実行する
    * x86にはin,out命令がある

### Hardwareによる支援

#### DMA

DMA (Direct Memory Access)はCPUを介さずにメモリ間でデータを転送する仕組み。  
CPUとは別に搭載されたDMAコントローラが指示されkjた転送アドレスと転送先アドレスの間で指示された量のデータ転送を行う。  I/OデバイスはメモリマップドI/Oによって物理アドレス空間にマッピングされているので、DMAを用いることでI/Oデバイスとメモリ間でデータ転送が可能になる。

DMAコントローラはCPUからはI/Oデバイスの1つとして見える。  
CPUからDMAコントローラへの指示はI/Oライトアクセスによって行う。

また、DMAコントローラへの指示をI/Oデバイスから出せる場合もある。